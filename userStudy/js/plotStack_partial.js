function plotStack_partial(t,a,e,n,l,r){function i(){plotStack_continue(l,"#continueStack",r,"index"),deleteRow(),p.selectAll("*").remove(),m.selectAll("*").remove(),A.stackedDataArr=[],A.nailDataArr=[],A.selected=!1,A.selectedNail=-1,A.curDrag=!1,A.toIndex=-2,proporgateStackedArr(A),A.totalAggre=computeTotalAggre(t),updateContribute(t,A),genStackedArr(A,t);var a=!0;plotPartialStack(A,a,0)}function s(t){return t+" s"}var c=e.totalW,o=e.totalH,d=e.totalW_nail,u=e.totalH_nail,p=d3.select(a[0]).append("svg").attr("width",c+e.m.left+e.m.right).attr("height",o+e.m.top+e.m.bottom).append("g").attr("transform","translate("+e.m.left+","+e.m.top+")"),m=d3.select(a[1]).append("svg").attr("width",d+e.m_nail.left+e.m_nail.right).attr("height",u+e.m_nail.top+e.m_nail.bottom).append("g").attr("transform","translate("+e.m_nail.left+","+e.m_nail.top+")");p.append("rect").attr("class","overlay").attr("x",0).attr("y",0).attr("width",c).attr("height",o).attr("opacity",0);var f=function(t){return-1==t[n]?"#D1D1D1":e.color(t[n])},k=d3.layout.stack().values(function(t){return t.values}).offset("zero").out(function(t,a,e){t.display={},t.display.x=t.x,t.display.y0=a,t.display.y=e}),g=k(t),h=g[0].values.map(function(t){return parseInt(t.x)});t.forEach(function(t){"#zmapp"==t.lineContent&&(3==t.clusterId&&t.values.forEach(function(t){parseInt(t.x)<=1408838400&&(t.y=5*t.y)}),7==t.clusterId&&t.values.forEach(function(t){parseInt(t.x)>=1410220800&&(t.y=60*t.y)}),-1==t.clusterId&&t.values.forEach(function(t){parseInt(t.x)<1410220800&&parseInt(t.x)<1408838400&&(t.y=10*t.y)}))});var v=d3.max(g.map(function(t){return d3.max(t.values,function(t){return t.display.y0+t.display.y})})),y=0,A={xTickFormat:s,mTop:e.m.top,stackProcess:k,svg:p,nailSVG:m,m:e.m,m_nail:e.m_nail,totalXRange:h,color:f,totalAggre:{},selected:!1,selectedNail:-1,width:c,height:o,width_nail:d,width_perNail:100,height_nail:u,padding:50,padding_nail:50,stackedDataArr:[],nailDataArr:[],listContent:e.listContent,range:{minY:y,maxY:v},rectOffset_nail:{width:10,height:5},curDrag:!1,toIndex:-2};i(),d3.select("#resetBtn").on("click",function(){i()}),d3.selectAll(".dismissTask").on("click",function(){d3.selectAll(".taskMark").remove(),taskInput.curTask=-1,i()}),d3.selectAll(".tryTask").on("click",function(){var t=this.getAttribute("id").slice(7);taskInput.curTask=t,i()}),d3.selectAll(".taskBtn").on("click",function(){d3.selectAll(".taskBtn").classed("active",!1),taskInput.curTask!=this.getAttribute("id").slice(7)?(d3.select(this).classed("active",!0),taskInput.curTask=this.getAttribute("id").slice(7)):taskInput.curTask=-1}),deleteRow()}